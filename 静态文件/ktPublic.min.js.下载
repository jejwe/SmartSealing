initTopNavScrollIndex(),renderProfile(),$(".updateLogTicker").smarticker({theme:4,speed:3e3,pausetime:3600,title:"æ›´æ–°æ—¥å¿—"}),$(".updateLogTicker").on("click","div",(function(e){-1!==$(e.currentTarget).attr("class").indexOf("tickertitle")&&window.open(kfc+"/about")})),ktUtils.removeSelfZz2(),$("#ktTab").find(".nav-link").on("click",(function(){$(".breadcrumb").find(".active").text($(this).text())})),$(".kt-img-box").hover((function(){$(this).find(".kt-img-inf").animate({"margin-top":"-20px"},100,"swing")}),(function(){$(this).find(".kt-img-inf").stop(!0,!1).animate({"margin-top":"0"},100,"swing")}));let dropdownEle=$(".dropdown");dropdownEle.on("mouseover",(function(){$("#mainNav .navbar-toggler").is(":hidden")&&($(this).addClass("show"),$(this).find("ul").addClass("show"))})),dropdownEle.on("mouseleave",(function(){$("#mainNav .navbar-toggler").is(":hidden")&&($(this).removeClass("show"),$(this).find("ul").removeClass("show"))})),$(".skew-title").children("span").hover((function(){var $el,n;return n=($el=$(this)).index()+1,$el.addClass("flat"),n%2==0?$el.prev().addClass("flat"):$el.hasClass("last")?void 0:$el.next().addClass("flat")}),(function(){return $(".flat").removeClass("flat")})),$("body").append('\x3c!-- æ¨¡æ€æ¡† --\x3e\n  <div class="modal fade" id="myModal" style="top: 31%;">\n    <div class="modal-dialog modal-sm">\n      <div class="modal-content">\n        \x3c!-- æ¨¡æ€æ¡†å¤´éƒ¨ --\x3e\n        <div class="modal-header" style="background: #73a6c1">\n          <h4 class="modal-title">æç¤º</h4>\n          <button type="button" class="close" data-dismiss="modal">&times;</button>\n        </div>\n        \x3c!-- æ¨¡æ€æ¡†ä¸»ä½“ --\x3e\n        <div class="modal-body kt-fc-title">\n        </div>\n        \x3c!-- æ¨¡æ€æ¡†åº•éƒ¨ --\x3e\n        <div class="modal-footer">\n          <button type="button" class="btn btn-secondary" data-dismiss="modal">å…³é—­</button>\n        </div>\n      </div>\n    </div>\n  </div>');let commentTimer,tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map((function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)}));function autoPushLink(){if("localhost"!==window.location.host){var bp=document.createElement("script"),curProtocol=window.location.protocol.split(":")[0];bp.src="https"===curProtocol?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s)}}function addComment(isAsc){commentTimer&&clearTimeout(commentTimer);let callNow=!commentTimer;commentTimer=setTimeout((()=>{commentTimer=null}),5e3),callNow&&realAddComment(isAsc)}function realAddComment(isAsc){const elm=$("#commentContext");if(elm.val().length>800)return ktUtils.snakeMsg("è¯„è®ºå­—æ•°è¿‡é•¿ï¼Œé™åˆ¶800å­—");let commentId=elm.data("comment-id"),replyCommentId=elm.data("reply-comment-id"),replyUserId=elm.data("reply-user-id"),replyNickname=elm.data("reply-nickname");if(commentId){!0===$("#commentContext").data("is-children")?replyChildrenComment(commentId,replyUserId,replyNickname,replyCommentId):replyComment(commentId,replyUserId,replyNickname)}else addToolComment(isAsc)}function addToolComment(isAsc,content){var commentContext=$("#commentContext").val();content&&(commentContext=content);$(".gitment-comments-list");if(commentContext){commentContext=isAsc?"```\n"+commentContext+"\n```":ktUtils.htmlEscape(commentContext);var params={userId:ktConfig.userId,menuId:ktcfg.toolId,comment:commentContext};ktUtils.aPost(ktConfig.api.addComment,params,(function(r){if(r.errorCode===ktConfig.request.okCode){let userId=r.data;log("comment userId={}",userId),ktConfig.userId=userId,ktUtils.initComments(null,null,!0),$("#commentContext").val("")}else ktUtils.snakeMsg("è¯„è®ºå‘è¡¨å¤±è´¥ï¼š"+r.msg)}))}else ktUtils.snakeMsg("ä½ å•¥éƒ½æ²¡æœ‰å‘è¡¨~~!")}function likeTool(obj){let $l=$(obj),likeIt=$l.attr("data-likeIt"),params={userId:ktConfig.userId,menuId:ktcfg.toolId},$lnEl=$("#likeNum");0===Number(likeIt)&&ktUtils.aPost(ktConfig.api.giveLikeTool,params,(function(r){if(r.errorCode===ktConfig.request.okCode){let likeNum=Number($lnEl.text());$lnEl.text(likeNum+1),$l.attr("data-likeIt","1"),$(obj).find("i").addClass("kt-comment-liked")}})),1===Number(likeIt)&&ktUtils.aPost(ktConfig.api.dislikeTool,params,(function(r){if(r.errorCode===ktConfig.request.okCode){var likeNum=Number($lnEl.text());$lnEl.text(likeNum-1),$l.attr("data-likeIt","0"),$(obj).find("i").removeClass("kt-comment-liked")}}))}function giveLike(obj,likeId,isChildren){var giveUrl,disUrl,likeIt=$(obj).attr("data-likeIt"),params={giveLikeUserId:ktConfig.userId,menuId:ktcfg.toolId,id:likeId},$lnEl=$(obj).find(".commentLikeNum");0===Number(likeIt)&&(giveUrl=!0===isChildren?ktConfig.api.giveLikeReply:ktConfig.api.giveLikeComment,ktUtils.aPost(giveUrl,params,(function(r){if(r.errorCode===ktConfig.request.okCode){var likeNum=Number($lnEl.text());$lnEl.text(likeNum+1),$(obj).attr("data-likeIt","1"),$(obj).find("span.fa").attr("class","fa fa-heart kt-heart15-red")}})));1===Number(likeIt)&&(disUrl=!0===isChildren?ktConfig.api.dislikeReply:ktConfig.api.dislikeComment,ktUtils.aPost(disUrl,params,(function(r){if(r.errorCode===ktConfig.request.okCode){var likeNum=Number($lnEl.text());$lnEl.text(likeNum-1),$(obj).attr("data-likeIt","0"),$(obj).find("span.fa").attr("class","fa fa-heart kt-heart15-empty")}})))}function likeComment(obj){var commentId=$(obj).parents(".gitment-comment").attr("id");this.giveLike(obj,commentId,!1)}function replyCommentFocus(obj){this.replyFocus(obj,!1)}function replyChildrenCommentFocus(obj){this.replyFocus(obj,!0)}function replyFocus(obj,isChildren){var replyNickname,replyUserId,replyCommentId;isChildren?(replyNickname=$(obj).parent().prev().find("a").text(),replyUserId=$(obj).parent().prev().find("a").attr("id"),replyCommentId=$(obj).parent().prev().find("a").data("reply-comment-id")):(replyNickname=$(obj).parent().parent().prev().find("a").text(),replyUserId=$(obj).parent().parent().prev().find("a").attr("id"));var commentId=$(obj).parents(".gitment-comment").attr("id");$("#commentContext").focus(),$("#commentContext").attr("placeholder","å›å¤ï¼š"+replyNickname),$("#commentContext").data("commentId",commentId),$("#commentContext").data("isChildren",isChildren),$("#commentContext").data("replyUserId",replyUserId),$("#commentContext").data("replyNickname",replyNickname),$("#commentContext").data("replyCommentId",replyCommentId)}function replyComment(commentId,replyUserId,nickname){this.reply(commentId,replyUserId,nickname,!1)}function replyChildrenComment(commentId,replyUserId,nickname,replyCommentId){this.reply(commentId,replyUserId,nickname,!0,replyCommentId)}function reply(commentId,replyUserId,nickname,isChildren,replyCommentId){var replyContent=$("#commentContext").val();if(replyContent){$('.gitment-comment[id="'+commentId+'"]').find(".reply-content-box");log("commentId=",commentId),replyContent=ktUtils.htmlEscape(replyContent);var replyNickname="",params={userId:ktConfig.userId,menuId:ktcfg.toolId,commentId:commentId,content:replyContent};!0===isChildren&&(replyNickname=nickname,params.replyNickname=replyNickname,params.id=replyCommentId),log("replyCommentId=",replyCommentId),params.replyUserId=replyUserId,log("reply params=",params),$.ajax({type:"POST",url:ktConfig.api.addReply,contentType:"application/json;charset=utf-8",data:JSON.stringify(params),success:function(r){if(r.errorCode===ktConfig.request.okCode){let userId=r.data;log("relyComment userId=",userId),ktConfig.userId=userId,ktUtils.initComments(null,null,!0),$("#commentContext").val("")}else ktUtils.snakeMsg("è¯„è®ºå¤±è´¥ï¼š"+r.msg)}})}else ktUtils.snakeMsg("ä½ å•¥éƒ½æ²¡æœ‰å‘è¡¨~~!")}function likeReply(obj){var replyId=$(obj).parents(".reply-item").attr("id");this.giveLike(obj,replyId,!0)}function postDelComment(url){ktUtils.postJson(url,null,(function(r){ktUtils.isRequestSuccess(r)?ktUtils.msg("åˆ é™¤æˆåŠŸ"):ktUtils.snakeMsg(r.msg)}))}function deleteComment(that){if(confirm("ç¡®è®¤åˆ é™¤æ­¤æ¡è¯„è®ºï¼Ÿ")){let commentId=$(that).parents(".gitment-comment").attr("id");postDelComment(kfc+"/comment/menu/{menuId}/delete/{id}".replace("{menuId}",ktcfg.toolId).replace("{id}",commentId))}}function deleteAndBanComment(that){if(confirm("ç¡®è®¤åˆ é™¤æ­¤æ¡è¯„è®ºå¹¶æ‹‰é»‘æ­¤IPï¼Ÿ")){let commentId=$(that).parents(".gitment-comment").attr("id"),userId=$(that).data("userId");postDelComment(kfc+"/comment/menu/{menuId}/delete/{id}/ban/{userId}".replace("{menuId}",ktcfg.toolId).replace("{id}",commentId).replace("{userId}",userId))}}function deleteReplyComment(that){if(confirm("ç¡®è®¤åˆ é™¤æ­¤æ¡è¯„è®ºå›å¤ï¼Ÿ")){let replyId=$(that).parents(".reply-item").attr("id");postDelComment(kfc+"/commentReply/menu/{menuId}/delete/{id}".replace("{menuId}",ktcfg.toolId).replace("{id}",replyId))}}function deleteAndBanReplyComment(that){if(confirm("ç¡®è®¤åˆ é™¤æ­¤æ¡è¯„è®ºå›å¤å¹¶æ‹‰é»‘æ­¤IPï¼Ÿ")){let replyId=$(that).parents(".reply-item").attr("id"),userId=$(that).data("userId");postDelComment(kfc+"/commentReply/menu/{menuId}/delete/{id}/ban/{userId}".replace("{menuId}",ktcfg.toolId).replace("{id}",replyId).replace("{userId}",userId))}}$("#commentPage").on("click",".gitment-comments-page-item",(function(){let $preSelEl=$("#commentPage").find(".gitment-selected"),preSelVal=$preSelEl.text();$preSelEl.removeClass("gitment-selected");let val=$(this).text();val&&"Next"!==val&&"Previous"!==val?($(this).attr("class","gitment-comments-page-item gitment-selected"),ktUtils.initComments(Number(val),null,!0)):"Next"===val?(val=Number(preSelVal)+1,$preSelEl.next().attr("class","gitment-comments-page-item gitment-selected"),ktUtils.initComments(val,null,!0)):"Previous"===val&&(val=Number(preSelVal)-1,$preSelEl.prev().attr("class","gitment-comments-page-item gitment-selected"),ktUtils.initComments(val,null,!0))}));var _hmt=_hmt||[];function openLogin(){}function signOut(){ktUtils.signOut(),ktUtils.clearAuthInfo(),$(".kt-login-in").hide(),$(".kt-login-out").show(),$("#loginAvatar").attr("src",""),$("#loginNickname").text(""),$("#loginTip").hide(),$("#qqLogin_comment").parent().show(),$("#wxLogin_comment").parent().show(),ktUtils.msg("æ³¨é”€æˆåŠŸ")}function showWxQrCode(){pop({width:350,height:200,title:"å®¢æœå°å§å§",content:""}),$("#mry-opo-content").html('<div style="float: left"><img style="width: 150px" src='+kfc+' "/static/image/wxqrcode.jpg"></div><div style="margin-top: 6px">å¾®ä¿¡å·ï¼š<span style="font-weight: bold">Queen_S18</span><br>æ·»åŠ å¾®ä¿¡æ—¶è¯·å¤‡æ³¨ï¼š<br><span style="color: red">è‚¡ç¥¨å¼€æˆ·é¢†å¥–åŠ±</span><br><span>10åˆ†é’Ÿå¿«é€Ÿå¼€æˆ·ï¼Œè·Ÿæ™®é€šè‚¡ç¥¨è´¦æˆ·å¼€æˆ·æµç¨‹åŸºæœ¬ä¸€è‡´ï¼Œç»å¯¹å®‰å…¨å¯é ï¼</span></div>'),ktUtils.adCount("è‚¡ç¥¨å¼€æˆ·é¢†å¥–åŠ±")}function initAd(){$("#ad1").text("ğŸ‘‰è‚¡ç¥¨è¯åˆ¸å¼€æˆ·ï¼Œæ‰¾å®¢æœå°å§å§å¼€é€šå¯äº«å—ä¸‡1.5ï¼Œå…äº”å¹¶å¯é¢†å–100å…ƒç°é‡‘å¥–åŠ±å“¦ï¼"),$("#adLogo").attr("src",kfc+"/static/image/adlogo.gif")}function removeGirl(){let girl=$("#girl_"+ktcfg.toolId),kun=$(girl).find(".kalvinUn");if(0===kun.length);else{$(kun).text()}}function showQrCode(title,content,qrCodeUrl){pop({width:300,height:360,title:title,content:$('<div style="width: 100%;height: 100%;text-align: center"><div class="kt-fc-desc"> '+content+' </div><img src="'+qrCodeUrl+'"></div>')})}let givePay;function showGiveQrCode(title,content,qrCodeUrl){pop({width:400,height:450,title:title,content:$('<div style="width: 100%;height: 100%;text-align: center"><div class="kt-fc-desc"> '+content+' </div><img id="giveQrCodeImg" style="width: 350px; height: auto" src="/static/image/giv.jpg" alt="å¾®ä¿¡æ‰“èµ"></div>')},(function(){givePay&&givePay.cancelQueryPoll()}))}function giveOrder(){let giveMoney=$("#giveMoney").val();if(!giveMoney||!$.isNumeric(giveMoney)||giveMoney<=0)return ktUtils.snakeMsg("è¯·è¾“å…¥æ­£ç¡®é‡‘é¢åæ‰“èµå“¦~");givePay=new ktWXPayment("give",ktUtils.getUserId()||ktConfig.userId,ktcfg.toolId,Math.ceil(100*giveMoney)),givePay.unifiedOrder((function(qrCodeUrl,h5PayUrl){qrCodeUrl?$("#giveQrCodeImg").attr("src",qrCodeUrl):window.location.href=h5PayUrl}),(function(){ktUtils.msg("æ‰“èµæˆåŠŸï¼Œæ„Ÿè°¢ğŸ˜˜"),ktUtils.closePop()}))}function clearOwoItemHover(){const $o=$(".OwO-body").find(".OwO-item-hover");$o&&$o.removeClass("OwO-item-hover")}function searchGlobal(){let word=$("#searchGlobalWord").val();return log("å…¨å±€æœç´¢ => ",word),word=word.trim(),!!word&&(word.length>50?ktUtils.snakeMsg("æœç´¢è¯å¤ªé•¿å•¦ï¼Œè¯·æ§åˆ¶åœ¨50ä¸ªå­—ç¬¦ä»¥å†…"):void(window.location.href=ktcfg.ctx+"/search?word="+word))}function renderProfile(){let userInfo=ktUtils.getUserInfo();if(log("renderProfile=",userInfo),userInfo){const baseHeadUrl=kfc+"/comm/static/head?url=";$(".kt-login-in").show(),$(".kt-login-out").hide(),$("#loginAvatar").attr("src",baseHeadUrl+encodeURIComponent(userInfo.avatar)),$("#loginNickname").text(userInfo.nickname),$("#loginTip").show(),$("#qqLogin_comment").parent().hide(),$("#wxLogin_comment").parent().hide()}else $(".kt-login-in").hide(),$(".kt-login-out").show(),$("#loginTip").hide(),$("#qqLogin_comment").parent().show(),$("#wxLogin_comment").parent().show()}function goTop(){$("html, body").animate({scrollTop:0},100)}function initTopNavScrollIndex(){let w=$(window).width(),navElm=$($("#topNavScroll").find("nav")),activeElm=$(navElm.find("a.active"));if(activeElm&&activeElm.length>0){let left=activeElm.position().left,activeWidth=activeElm.outerWidth(),activeHaftWidth=parseInt(activeWidth/2),sl=parseInt(left/w)*w;sl+=left%w+activeWidth-parseInt(w/2)-activeHaftWidth,navElm.scrollLeft(sl)}}!function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?d944c2103ca675bd03014e766c6f45f4";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}(),setTimeout(removeGirl,1e3),ktUtils.initComments(),$(".kt-fixed-bar").on("click","a",(function(){if("give"===$(this).data("type"))showGiveQrCode("èµä¸€æ¯é»‘å’–å•¡å–å§ï¼","å¾®ä¿¡æ‰«ä¸€æ‰«æ”¯ä»˜ï¼Œè°¢è°¢å„ä½è€æ¿!","")})),$(".kt-mini-bar").on("mouseover",(function(event){var e=event||window.event;let bottom=$(window).height()-e.clientY-100;$("#miniPop").attr("bottom",bottom),$("#miniPop").show()})),$(".kt-mini-bar").on("mouseout",(function(event){var e=event||window.event;$(window).height(),e.clientY;$("#miniPop").hide()})),$(".kt-wx-bar").on("mouseover",(function(event){var e=event||window.event;let bottom=$(window).height()-e.clientY-100;$("#wxPop").attr("bottom",bottom),$("#wxPop").show()})),$(".kt-wx-bar").on("mouseout",(function(event){var e=event||window.event;$(window).height(),e.clientY;$("#wxPop").hide()})),$(".kt-emoji").on("click",(function(){!0===$(".OwO").hasClass("OwO-open")?$(".OwO").removeClass("OwO-open"):$(".OwO").addClass("OwO-open")})),$(document).on("click",(function(e){"emojiImg"!==$(e.target).attr("id")&&($(".OwO").removeClass("OwO-open"),clearOwoItemHover())})),$(".OwO-item").on("click",(function(e){let emojiTag;emojiTag=$(e.target).is("img")?$(e.target).parent().attr("title"):$(e.target).attr("title"),$("#commentContext").insertContent(":"+emojiTag+":"),$(".OwO").removeClass("OwO-open"),clearOwoItemHover()})),$(".OwO").on("click",(function(){event.stopPropagation()})),$(".OwO-packages").find("li").on("click",(function(e){const tabIdx=$(this).data("id");$(this).parent().find(".OwO-package-active").removeClass("OwO-package-active"),$(this).addClass("OwO-package-active"),$(".OwO-body").find(".OwO-items-show").removeClass("OwO-items-show"),$($(".OwO-body").find("ul")[tabIdx]).addClass("OwO-items-show"),clearOwoItemHover()})),$(".OwO-item").on("mouseover",(function(e){let owoItemObj;owoItemObj=$(e.target).is("img")?$(e.target).parent():$(e.target),clearOwoItemHover(),$(owoItemObj).addClass("OwO-item-hover")})),$("#gotoToCao").on("click",(function(){$("#commentContext").focus()})),$(".my-ad").on("click",(function(){ktUtils.adCount("æŠ–éŸ³åŠ©æ‰‹-å¹¿å‘Š")})),$(".ad01").on("click",(function(){ktUtils.adCount("æŠ–éŸ³æ¶¨ç²‰-å¹¿å‘Š")})),$("#searchGlobalBtn").on("click",ktUtils.debounce(searchGlobal,1500,!0)),$("#searchGlobalWord").on("keyup",(function(e){13===e.keyCode&&searchGlobal()})),$("#yddAd").on("click",(function(){ktUtils.adCount("ç¼˜å¤šå¤š")})),$("#pxdAd").on("click",(function(){ktUtils.adCount("ç›˜ä¸æ´")})),$("#share-comments-box").on("click",(function(){$("#commentContext").focus()})),$(".kt-share-collection").on("click",ktUtils.debounce((function(){const iEl=$(this).find("i"),checkedClass="kt-share-collection-check",params={userId:ktUtils.getUserId(),menuId:ktcfg.toolId};log(params),iEl.hasClass(checkedClass)?ktUtils.postJson(kfc+"/myCollection/remove",params,(function(r){ktUtils.isRequestSuccess(r)?iEl.removeClass(checkedClass):ktUtils.snakeMsg(r.msg)})):ktUtils.postJson(kfc+"/myCollection/add",params,(function(r){ktUtils.isRequestSuccess(r)?iEl.addClass(checkedClass):ktUtils.snakeMsg(r.msg)}))}),2e3,!0));const shareCopy=new ClipboardJS(".kt-share-copy",{text:function(trigger){return window.location.href}});function showSharePop(){let jQuery=$("body").find('textarea[id="shareTextContent"]'),title=$("title").text(),url=window.location.href;console.log({title:title,url:url}),jQuery.text(title+"\n"+url),pop({width:490,height:200,title:"åˆ†äº«æ“ä½œ",content:$("#sharePop")})}function checkCollection(){const params={userId:ktUtils.getUserId(),menuId:ktcfg.toolId};ktUtils.postJson(kfc+"/myCollection/check",params,(function(r){ktUtils.isRequestSuccess(r)&&!0===r.data&&$(".kt-share-collection").find("i").addClass("kt-share-collection-check")}))}function showTmpNotice(){let lastDate=new Date(2025,3,17,23,59,59);log(lastDate);let now=new Date;lastDate.getTime()>=now.getTime()&&$("#tmpNotice").show()}shareCopy.on("success",(function(e){ktUtils.msg("å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼"),e.clearSelection()})),$(".kt-share-more").on("click",(function(){showSharePop()})),$(".kt-share-pop").on("click",(function(){showSharePop()})),$("body").on("click",".kt-share-qq",(function(){let url="https://connect.qq.com/widget/shareqq/index.html?url={url}&title={title}&desc={desc}&summary=&pics=&flash=&site=Kalvinåœ¨çº¿å·¥å…·";url=url.replace("{url}",window.location.href).replace("{title}",$("title").text()).replace("{desc}",$('meta[name="keywords"]').attr("content")),window.open(url,"","width=800,height=580")})),$("body").on("click",".kt-share-wechat",(function(){let url=window.location.href;const qr=$('<div id="shareWechatQr"></div>');ktUtils.closePop(),pop({width:220,height:280,title:"å¾®ä¿¡æ‰«ä¸€æ‰«æŸ¥çœ‹å¹¶åˆ†äº«",content:qr}),new QRCode("shareWechatQr",{text:url,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})})),$("body").on("click",".kt-share-weibo",(function(){let url="https://service.weibo.com/share/share.php?url={url}&title={title}&appkey=1442253724&searchPic=true";url=url.replace("{url}",window.location.href).replace("{title}",$("title").text()),window.open(url,"","width=800,height=580")})),ktcfg.toolId&&1688!==ktcfg.toolId&&1===ktcfg.toolLevel&&checkCollection(),showTmpNotice();