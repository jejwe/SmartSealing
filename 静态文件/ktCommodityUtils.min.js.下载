function userCommodity(userId,commodityId,commodityType){this.userId=userId;this.commodityId=commodityId;this.commodityType=commodityType;this.time=0;this.checkUsable=function(){let loginUserId=ktUtils.getUserId();if(loginUserId){let r=ktUtils.post(ktConfig.api.getLoginUserAvailableNum,{userId:loginUserId,commodityId:this.commodityId});if(r.errorCode===ktConfig.request.okCode){this.time=Number(r.data);return Number(r.data)>0}else if(r.errorCode===ktConfig.request.notAuthCode){ktUtils.snakeMsg('登录过期了，目前为游客身份；如果你的账号有充值次数，请登录后使用')}else{ktUtils.snakeMsg('发生异常，请重试！')}}else{let commodityToken=ktUtils.getCommodityToken(this.commodityType);if(commodityToken){let r=ktUtils.post(ktConfig.api.getVisitorAvailableNum,{commodityToken:commodityToken,commodityId:this.commodityId});if(r.errorCode===ktConfig.request.okCode){this.time=Number(r.data);return Number(r.data)>0}else{ktUtils.snakeMsg('发生异常，请重试！')}}}return false};this.getUserCommodityInfo=function(){let userCommodityInfo=null;let token=ktUtils.getToken();if(!token){token=ktUtils.getCommodityToken(this.commodityType);if(!token){return false}}$.ajax({type:'POST',url:ktConfig.api.getCommodity,data:{token:token,commodityId:this.commodityId},async:false,success:function(r){if(r.errorCode===ktConfig.request.okCode){userCommodityInfo=r.data}else{error('获取用户商品信息失败..')}}});return userCommodityInfo};this.getUserCommodityInfoAsync=function(fun){let token=ktUtils.getToken();if(!token){token=ktUtils.getCommodityToken(this.commodityType);if(!token){return false}}ktUtils.postJson(ktConfig.api.getCommodity,{token:token,commodityId:this.commodityId},fun)}}